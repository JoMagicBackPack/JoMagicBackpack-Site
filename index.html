<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jo’Magic Backpack</title>
  <meta name="description" content="Jo’Magic Backpack — a menagerie of vintage + new finds." />
  <link rel="icon" href="Assets/B2DF5D37-DEB2-47EE-B5D9-ABAB912A4739.png" />

  <style>
    /* ===== Theme (dark with vivid accents) ===== */
    :root{
      --bg:#05060a;           /* page background */
      --band:#0b0e15;         /* subtle section band */
      --band-2:#0d111a;       /* second band for contrast */
      --card:#0f1218;         /* card panels */
      --stroke:#232734;       /* borders */
      --text:#f5f7fb;         /* main text */
      --muted:#b8c0cc;        /* secondary text */
      --accent:#8bd3ff;       /* electric blue */
      --accent-2:#c9a9ff;     /* soft purple to mix the glow */
      --btn:#0d2536;          /* button base */
      --btn-hover:#113149;    /* button hover */
      --shadow:0 20px 60px rgba(0,0,0,.45);
      --ring:#2a95ff77;       /* focus ring */
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    a{color:var(--accent)}
    a:focus-visible, button:focus-visible { outline:3px solid var(--ring); outline-offset:2px }

    .wrap{max-width:1040px; margin:0 auto; padding:28px 18px 48px}

    /* ===== HERO (logo + glow) ===== */
    .hero{
      position:relative; display:grid; place-items:center; gap:12px;
      padding:36px 0 24px; text-align:center; isolation:isolate;
    }
    .hero::before{
      content:""; position:absolute; inset:-40px 0 -20px;
      background:
        radial-gradient(380px 220px at 50% 10%, #0b1e2c 0%, transparent 60%),
        radial-gradient(440px 280px at 55% 0%, color-mix(in hsl, var(--accent), transparent 60%) 0%, transparent 70%),
        radial-gradient(420px 220px at 45% 10%, color-mix(in hsl, var(--accent-2), transparent 65%) 0%, transparent 70%);
      filter: blur(18px) saturate(120%);
      opacity:.9; z-index:-1;
    }
    .site-logo{
      width:min(72vw, 300px); height:auto; display:block;
      filter: drop-shadow(0 8px 24px rgba(0,0,0,.55));
    }
    .mission{
      font-size:clamp(18px,3.8vw,22px); color:var(--muted); margin:10px 0 6px
    }

    /* ===== NAV Buttons ===== */
    .nav-links{display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin:10px 0 6px}
    .btn{
      display:inline-flex; align-items:center; gap:.6ch; cursor:pointer;
      padding:12px 16px; border-radius:12px;
      background:var(--btn); color:var(--text); text-decoration:none; font-weight:700;
      border:1px solid #1b2a36; box-shadow: var(--shadow);
      transition:transform .15s ease, background .15s ease, box-shadow .2s ease, border-color .2s ease;
    }
    .btn:hover{ background:var(--btn-hover); transform:translateY(-1px); border-color:color-mix(in srgb, var(--accent) 60%, #1b2a36) }
    .btn--primary{ background:linear-gradient(180deg, #1a3a52, #0c2a3e); border-color:#214d68 }
    .btn--primary:hover{ background:linear-gradient(180deg, #224d6b, #123852) }

    /* ===== Section bands ===== */
    .band{background:var(--band); border-radius:18px; border:1px solid var(--stroke); box-shadow:var(--shadow); padding:18px}
    .band.alt{background:var(--band-2)} /* alternating background to break the “all black” feel */

    /* ===== Section headings with pop ===== */
    .section-title{
      font: 800 clamp(22px,6vw,34px)/1.05 system-ui,sans-serif;
      letter-spacing:.2px; margin:0 0 8px; color:var(--accent);
      text-shadow:0 0 28px color-mix(in srgb, var(--accent) 25%, transparent);
    }
    .section-sub{ margin:0; color:var(--muted); font-size:clamp(14px,3.2vw,16px) }

    /* ===== About ===== */
    .about{color:var(--muted); line-height:1.6; font-size:clamp(15px,3.2vw,16px)}

    /* ===== Reviews Carousel (auto-height, no stars) ===== */
    #ebay-feedback{margin-top:18px; padding:20px 0}
    .jf-head{display:grid; gap:.25rem 1rem; align-items:end; margin:0 0 12px}
    @media (min-width:820px){
      .jf-head{grid-template-columns:1fr 1fr}
      .section-sub{text-align:right}
    }
    .jf-viewport{position:relative}
    .jf-track{
      list-style:none; margin:0; padding:0; position:relative; overflow:hidden;
      height:auto; transition:height .28s ease;
    }
    .jf-slide{position:absolute; inset:0; transform:translateX(100%); transition:transform .35s ease}
    .jf-slide:first-child{transform:translateX(0)}
    .jf-card{
      width:100%; max-width:860px; margin:0 auto;
      background:var(--card); border:1px solid var(--stroke); border-radius:16px;
      padding:clamp(16px,4vw,28px); display:grid; gap:.8rem; box-shadow:var(--shadow);
    }
    .jf-quote{margin:0; font-size:clamp(18px,4.6vw,26px); line-height:1.55; word-break:break-word}
    .jf-meta{margin:0; color:var(--muted); font-size:clamp(14px,3.2vw,16px)}

    .jf-controls{display:grid; grid-template-columns:2.75rem 1fr 2.75rem; align-items:center; gap:.6rem; margin-top:.9rem}
    .jf-btn{width:2.75rem; height:2.75rem; border-radius:999px; border:1px solid var(--stroke); background:#0f1117; color:var(--text); font-size:1.25rem}
    .jf-dots{display:flex; justify-content:center; gap:.5rem}
    .jf-dot{width:.55rem; height:.55rem; border-radius:999px; background:#6b7280; border:none}
    .jf-dot[aria-current="true"]{background:var(--accent)}

    /* ===== eBay Products Carousel ===== */
    #ebay-products { margin-top:16px; }
    #ebay-carousel {
      position: relative;
      overflow: hidden;                 /* hides edges behind buttons */
      padding: 0.5rem 2.25rem;          /* room for nav buttons */
      margin-top: 10px;
    }
    #carousel-track {
      display: flex;
      gap: 1rem;
      scroll-behavior: smooth;
      overflow-x: auto;                 /* swipeable on mobile */
    }
    #carousel-track .card {
      flex: 0 0 auto;
      min-width: 220px;
      max-width: 240px;
      border: 1px solid var(--stroke);
      border-radius: 12px;
      background: var(--card);
      padding: 0.5rem;
      text-decoration: none;
      color: var(--text);
      box-shadow: var(--shadow);
      transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
    }
    #carousel-track .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 16px rgba(0,0,0,.45);
      border-color: color-mix(in srgb, var(--accent) 50%, var(--stroke));
    }
    #carousel-track img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
      display: block;
    }
    #carousel-track .title {
      font-size: 0.95rem;
      line-height: 1.25;
      margin: 0.45rem 0 0.2rem;
      height: 2.5em;                    /* keep rows aligned */
      overflow: hidden;
      text-overflow: ellipsis;
    }
    #carousel-track .price {
      font-weight: 800;
      color: var(--accent);
    }
    .carousel-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 34px;
      height: 34px;
      border: 1px solid var(--stroke);
      border-radius: 50%;
      background: var(--band);
      color: var(--text);
      font-size: 20px;
      display: grid;
      place-items: center;
      cursor: pointer;
      opacity: 0.9;
      transition: background .2s ease, opacity .2s ease;
      user-select: none;
    }
    .carousel-nav:hover { background: var(--btn-hover); opacity: 1; }
    .carousel-nav:disabled { opacity: 0.35; cursor: default; }
    .carousel-nav.prev { left: .5rem; }
    .carousel-nav.next { right: .5rem; }
    .carousel-nav:focus-visible { outline: 3px solid var(--ring); outline-offset: 2px; }

    /* ===== Footer ===== */
    footer{color:#9aa3b1; font-size:12px; display:flex; gap:8px; justify-content:space-between; flex-wrap:wrap; margin-top:22px}

    /* ===== Motion preferences ===== */
    @media (prefers-reduced-motion: reduce){
      .jf-slide{ transition:none }
      .jf-track{ transition:none }
      .btn{ transition:none }
    }
  </style>
</head>
<body>
  <main class="wrap">

    <!-- HERO -->
    <section class="hero" aria-label="Brand header">
      <img class="site-logo"
           src="Assets/B2DF5D37-DEB2-47EE-B5D9-ABAB912A4739.png"
           alt="Jo’Magic Backpack Logo" decoding="async" loading="eager" />
      <p class="mission">A menagerie of finds.</p>

      <nav class="nav-links" aria-label="Primary">
<a class="btn btn--primary" href="https://ebay.us/m/xyWXiR" target="_blank" rel="noopener">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2500 781" class="ebay-logo" style="height:20px; margin-right:8px; vertical-align:middle;">
    <path fill="#E53238" d="M587.7 281.7c-49.8 0-85.4 25.5-85.4 70.9 0 30.1 17 51.7 53.3 60.7 28.3 7.1 66.6 8.9 93.9 10.7v4.5c0 17.8-13.4 28.3-37.1 28.3-28.3 0-61.1-9.8-84-24.1l-19.6 39.7c26.4 16.9 65.7 27.4 104.9 27.4 63.9 0 98.6-29.2 98.6-83.6V293.9c0-20.5 1.8-40.1 3.6-57.9h-48.9l-3.6 27.4h-1.8c-18.7-18.7-44.2-27.4-73.1-27.4z"/>
    <path fill="#0064D2" d="M976.9 281.7c-40.6 0-72.2 10.7-96.8 32.1l22.8 34.2c21.4-15.2 40.1-23.7 69.3-23.7 39.7 0 61.1 17.8 61.1 49.8v10.7c-91.5-.9-150.8 25.5-150.8 82.7 0 34.2 26.4 69.3 83.6 69.3 35.1 0 63.9-12.5 83.6-36.2h.9l4.5 28.3h49.8c-1.8-11.6-3.6-28.3-3.6-45.1V371c0-60.2-38.9-89.1-123.6-89.1z"/>
    <path fill="#F5AF02" d="M1258.9 280.8c-30.1 0-61.1 12.5-79.8 33h-.9v-137H1126v330.7h52.4l3.6-28.3h.9c18.7 20.5 44.2 32.1 76.1 32.1 57.1 0 116.3-45.1 116.3-118.1-.1-71.2-51.7-112.4-115.8-112.4z"/>
    <path fill="#86B817" d="M1705.6 281.7c-40.6 0-72.2 10.7-96.8 32.1l22.8 34.2c21.4-15.2 40.1-23.7 69.3-23.7 39.7 0 61.1 17.8 61.1 49.8v10.7c-91.5-.9-150.8 25.5-150.8 82.7 0 34.2 26.4 69.3 83.6 69.3 35.1 0 63.9-12.5 83.6-36.2h.9l4.5 28.3h49.8c-1.8-11.6-3.6-28.3-3.6-45.1V371c0-60.2-39-89.1-123.6-89.1z"/>
  </svg>
  Visit the eBay Store
</a>
        <a class="btn" href="#about">About</a>
        <a class="btn" href="mailto:hello@jomagicbackpack.com">Contact</a>
      </nav>
    </section>

    <!-- ABOUT -->
    <section id="about" class="band alt" aria-labelledby="about-title">
      <h2 class="section-title" id="about-title">About Jo’Magic Backpack</h2>
      <p class="about">
        Jo’Magic Backpack is a traveling trove — vintage, new, and unpredictable.
        If it sparks curiosity, it goes in the pack.
      </p>
    </section>

    <!-- LIVE PRODUCTS -->
    <section id="ebay-products" class="band alt" aria-labelledby="products-title" style="margin-top:16px">
      <h2 class="section-title" id="products-title">Fresh in the Backpack</h2>
      <p class="section-sub">Live feed from the eBay store</p>

      <div id="ebay-carousel" aria-label="eBay product carousel">
        <button class="carousel-nav prev" aria-label="Scroll left" type="button">‹</button>
        <div id="carousel-track"></div>
        <button class="carousel-nav next" aria-label="Scroll right" type="button">›</button>
      </div>
    </section>

    <!-- REVIEWS -->
    <section id="ebay-feedback" aria-label="eBay feedback" class="band" style="margin-top:16px">
      <header class="jf-head">
        <h2 class="section-title">What buyers are saying</h2>
        <p class="section-sub">Real feedback from real customers</p>
      </header>

      <div class="jf-viewport" role="region" aria-roledescription="carousel" aria-label="Buyer testimonials" tabindex="0">
        <ul class="jf-track" id="jfTrack">
          <li class="jf-slide">
            <figure class="jf-card">
              <blockquote class="jf-quote">“Excellent super fast shipping and packing, exactly as described; awesome vintage solid copper mold. Very pleased with purchase—highly recommended. Would buy again. A+++++”</blockquote>
              <figcaption class="jf-meta">- nor-eastern (3588) · Past 6 months</figcaption>
            </figure>
          </li>
          <li class="jf-slide">
            <figure class="jf-card">
              <blockquote class="jf-quote">“Oh my gosh—what a great deal this seller had for me! Beautiful Uno de 50 bracelet at a bargain price. Very professional, expertly packed with thank you card inside. 5 Star Seller!”</blockquote>
              <figcaption class="jf-meta">- candschel (184) · Past year</figcaption>
            </figure>
          </li>
          <li class="jf-slide">
            <figure class="jf-card">
              <blockquote class="jf-quote">“I rarely leave feedback until I’m rated as a buyer. You must do something that delivers value to my experience and this seller did just that. Fantastic communication and item just as expected. Thank you for offering a level of customer contact that was unexpected and appreciated. 100% satisfied!”</blockquote>
              <figcaption class="jf-meta">- bennettangels3 (911) · Past year</figcaption>
            </figure>
          </li>
          <li class="jf-slide">
            <figure class="jf-card">
              <blockquote class="jf-quote">“Thank you for the vintage jacket that replaced the identical one I wore for 20 years! Could not be happier. Like new and it’s just exactly perfect!”</blockquote>
              <figcaption class="jf-meta">- scanimal68 (55) · More than a year ago</figcaption>
            </figure>
          </li>
          <li class="jf-slide">
            <figure class="jf-card">
              <blockquote class="jf-quote">“This seller really ROCKS! The fastest ever. Thank you!”</blockquote>
              <figcaption class="jf-meta">- migueldinaj (52) · More than a year ago</figcaption>
            </figure>
          </li>
        </ul>

        <div class="jf-controls">
          <button class="jf-btn" id="jfPrev" aria-label="Previous">‹</button>
          <div class="jf-dots" id="jfDots"></div>
          <button class="jf-btn" id="jfNext" aria-label="Next">›</button>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer>
      <div>© <span id="y"></span> Jo’Magic Backpack</div>
      <div>Site by Jo’Magic Backpack • Hosted on Netlify</div>
    </footer>
  </main>

  <!-- Reviews Carousel JS (existing) -->
  <script>
    (() => {
      const track = document.getElementById('jfTrack');
      const slides = Array.from(track.children);
      const prev = document.getElementById('jfPrev');
      const next = document.getElementById('jfNext');
      const dotsWrap = document.getElementById('jfDots');
      const viewport = document.querySelector('#ebay-feedback .jf-viewport');
      let index = 0, timer = null;

      // dots
      slides.forEach((_, i) => {
        const b = document.createElement('button');
        b.className = 'jf-dot'; b.type = 'button';
        b.setAttribute('aria-label', 'Go to slide ' + (i + 1));
        if (i === 0) b.setAttribute('aria-current', 'true');
        dotsWrap.appendChild(b);
      });
      const dots = Array.from(dotsWrap.children);

      function fitHeight(){
        const active = slides[index];
        if (!active) return;
        const h = active.scrollHeight;
        requestAnimationFrame(() => { track.style.height = h + 'px'; });
      }

      function show(i, user=false){
        index = (i + slides.length) % slides.length;
        slides.forEach((li, k) => {
          li.style.transform = (k === index) ? 'translateX(0)'
                           : (k < index ? 'translateX(-100%)' : 'translateX(100%)');
        });
        dots.forEach((d, k) => d.toggleAttribute('aria-current', k === index));
        fitHeight();
        if (user){ stop(); start(); }
      }

      // init
      slides.forEach(li => li.style.transform = 'translateX(100%)');
      if (slides[0]) slides[0].style.transform = 'translateX(0)';
      requestAnimationFrame(fitHeight);

      // controls
      prev.addEventListener('click', () => show(index - 1, true));
      next.addEventListener('click', () => show(index + 1, true));
      dots.forEach((d, k) => d.addEventListener('click', () => show(k, true)));

      // autoplay (pause on focus)
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      function start(){ if(!reduce) timer = setInterval(() => show(index + 1), 5000); }
      function stop(){ clearInterval(timer); timer = null; }
      viewport.addEventListener('focusin', stop);
      viewport.addEventListener('focusout', start);
      window.addEventListener('resize', () => requestAnimationFrame(fitHeight), {passive:true});
      start();

      // touch swipe for phones
      let startX = 0, endX = 0;
      viewport.addEventListener('touchstart', (e)=>{ startX = e.changedTouches[0].clientX; }, {passive:true});
      viewport.addEventListener('touchend',   (e)=>{
        endX = e.changedTouches[0].clientX;
        const dx = endX - startX;
        if (Math.abs(dx) > 40) { // swipe threshold
          if (dx < 0) show(index + 1, true); else show(index - 1, true);
        }
      }, {passive:true});

      // footer year
      document.getElementById('y').textContent = new Date().getFullYear();
    })();
  </script>

  <!-- Live eBay Products Carousel JS -->
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const endpoint = `${location.origin}/.netlify/functions/ebay-listings?limit=12`; // keep in sync with your function filename
      const track = document.getElementById('carousel-track');
      const prevBtn = document.querySelector('#ebay-carousel .prev');
      const nextBtn = document.querySelector('#ebay-carousel .next');

      // Helpers for nav
      function getStep() {
        const card = track.querySelector('.card');
        if (!card) return 300; // fallback
        const style = getComputedStyle(track);
        const gap = parseFloat(style.columnGap || style.gap || '16');
        return card.getBoundingClientRect().width + gap;
      }
      function updateButtons() {
        const maxScroll = track.scrollWidth - track.clientWidth - 1;
        prevBtn.disabled = track.scrollLeft <= 0;
        nextBtn.disabled = track.scrollLeft >= maxScroll;
      }

      try {
        const res = await fetch(endpoint, { cache: 'no-store' });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const { products = [] } = await res.json();

        if (!products.length) {
          track.textContent = 'No items found.';
          updateButtons();
          return;
        }

        // Render cards
        track.innerHTML = products.map(p => `
          <a class="card" href="${p.url}" target="_blank" rel="noopener">
            <img src="${p.img}" alt="">
            <div class="title">${p.title}</div>
            <div class="price">${p.price} ${p.currency || ''}</div>
          </a>
        `).join('');

        updateButtons();
      } catch (err) {
        console.error('Failed to load eBay listings:', err);
        track.textContent = 'eBay items unavailable right now.';
      }

      // Nav button actions
      prevBtn.addEventListener('click', () => { track.scrollBy({ left: -getStep(), behavior: 'smooth' }); });
      nextBtn.addEventListener('click', () => { track.scrollBy({ left:  getStep(), behavior: 'smooth' }); });

      // Keep buttons accurate as user scrolls/resize
      track.addEventListener('scroll', updateButtons, { passive: true });
      window.addEventListener('resize', updateButtons);
    });
  </script>
</body>
</html>
